<!DOCTYPE html>
<head>

</head>
<body>

    <div ng-controller="MainCtrl">

        <!-- Редагування компетенції -->
        <div ng-if="getGlobalEditMode()==1">

            <div ng-init="getGroupTree(); getSkill(); show=0"></div>
            <h2>Редагування компетенції:</h2>
            <h3 ng-bind="data[0].skill_name"></h3>

            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Компетенція" ng-model="nameText">
            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Опис" ng-model="descriptionText">
            <div class="input-group" style="margin-bottom: 10px">
                <input type="text" class="form-control" type="text" class="form-control" placeholder="Група" ng-model="groupText">
                <div class="input-group-btn">
                    <button class="btn btn-primary" ng-click="show=!show">{{changeButtonTextSelectFromTree(show)}}</button>
                </div>
            </div>

            <div style="overflow-y: scroll; height: 200px" ng-show="show"><div id="tree"></div></div>

            <div style="margin-bottom: 20px"></div>

            <div style="margin-bottom: 20px" class="btn-group">
                <a href="#adminView"><button ng-click="saveSkill(nameText, currentGroup.right_key, currentGroup.node_level, descriptionText, data[0].id)" class="btn btn-primary" type="button">Зберегти</button></a>
                <a href="#adminView"><button ng-click="" class="btn btn-primary" type="button">Скасувати</button></a>
            </div>

            <h3>Список індикаторів:</h3>

            <div class="thumbnail">

                <div ng-if="data[0].indicators.length == 0">
                    <h5>Дана компетенція не містить в собі індикаторів</h5>
                </div>

                <div ng-repeat="item_indicator in data[0].indicators">
                    <div style="margin: 5px">
                        <div class="row padded">
                            <div class="col-lg-10 col-xs-10">
                                <h4>{{item_indicator.indicator_name}}</h4>
                                <h5>{{item_indicator.description}}</h5>
                            </div>
                            <div class="col-lg-2 col-xs-2">
                                <div class="input-group-btn">
                                    <a href="#editIndicator"><button ng-click="setGlobalEditParams(data[0].id, item_indicator.id, 'ALL_GROUPS', 2);" class="btn btn-primary" type="button"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button></a>
                                    <a href="#editSkill"><button ng-click="removeIndicator(item_indicator.id); getSkill()" class="btn btn-danger" type="button"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <a href="#editIndicator"><button ng-click="setGlobalEditParams(getGlobalSkillId(), -1, 'ALL_GROUPS', 5); saveAdditionalData(data[0].skill_name)" class="btn btn-primary" type="button">Add</button></a>
        </div>

        <!-- Редагування індикатору -->
        <div ng-if="getGlobalEditMode()==2">

            <div ng-init="getIndicator()"></div>
            <h2>Редагування індикатору:</h2>
            <h3 ng-bind="data[0].indicators[0].indicator_name"></h3>

            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Індикатор" ng-model="nameText">
            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Опис" ng-model="descriptionText">

            <div style="margin-bottom: 20px" class="btn-group">
                <a href="#editSkill"><button ng-click="saveIndicator(nameText, getGlobalSkillId(), descriptionText, data[0].indicators[0].id); setGlobalEditParams(getGlobalSkillId(), 'ALL_INDICATORS', 'ALL_GROUPS', 1)" class="btn btn-primary" type="button">Зберегти</button></a>
                <a href="#editSkill"><button ng-click="setGlobalEditParams(getGlobalSkillId(), 'ALL_INDICATORS', 'ALL_GROUPS', 1)" class="btn btn-primary" type="button">Скасувати</button></a>
            </div>

        </div>

        <!-- Редагування групи -->
        <div ng-if="getGlobalEditMode()==3">

            <h2>Редагування групи:</h2>

            <div ng-init="getGroupTree(); getGroup(); show=0"></div>

            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Назва групи" ng-model="nameText">
            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Опис" ng-model="descriptionText">
            <div class="input-group" style="margin-bottom: 10px">
                <input type="text" class="form-control" placeholder="Коренева група" ng-model="groupText">
                <div class="input-group-btn">
                    <button class="btn btn-primary" ng-click="show=!show">{{changeButtonTextSelectFromTree(show)}}</button>
                </div>
            </div>

            <div style="overflow-y: scroll; height: 200px" ng-show="show"><div id="tree"></div></div>

            <div style="margin-bottom: 20px"></div>

            <div style="margin-bottom: 20px" class="btn-group">
                <a href="#adminView"><button ng-click="saveGroup(nameText, currentGroup.right_key, currentGroup.node_level, descriptionText, data[0].id);" class="btn btn-primary" type="button">Зберегти</button></a>
                <a href="#adminView"><button ng-click="" class="btn btn-primary" type="button">Скасувати</button></a>
            </div>

        </div>

        <!-- Додання нової компетенції -->
        <div ng-if="getGlobalEditMode()==4">

            <h2>Створення нової компетенції:</h2>

            <div ng-init="getGroupTree()"></div>

            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Компетенція" ng-model="nameText">
            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Опис" ng-model="descriptionText">

            <div class="input-group" style="margin-bottom: 10px">
                <input type="text" class="form-control" placeholder="Група" ng-model="groupText">
                <div class="input-group-btn">
                    <button class="btn btn-primary" ng-click="show=!show">{{changeButtonTextSelectFromTree(show)}}</button>
                </div>
            </div>

            <div style="overflow-y: scroll; height: 200px" ng-show="show"><div id="tree"></div></div>

            <div style="margin-bottom: 20px"></div>

            <div style="margin-bottom: 20px" class="btn-group">
                <a href="#adminView"><button ng-click="saveSkill(nameText, currentGroup.right_key, currentGroup.node_level, descriptionText, -1);" class="btn btn-primary" type="button">Створити</button></a>
                <a href="#adminView"><button ng-click="" class="btn btn-primary" type="button">Назад</button></a>
            </div>

        </div>

        <!-- Додання індикатору -->
        <div ng-if="getGlobalEditMode()==5">

            <h2>Створення нового індикатору</h2>
            <h3>для еомпетенції "{{getAdditionalData()}}":</h3>

            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Індикатор" ng-model="nameText">
            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Опис" ng-model="descriptionText">

            <div style="margin-bottom: 20px" class="btn-group">
                <a href="#editSkill"><button ng-click="saveIndicator(nameText, getGlobalSkillId(), descriptionText, -1); setGlobalEditParams(getGlobalSkillId(), 'ALL_INDICATORS', 'ALL_GROUPS', 1)" class="btn btn-primary" type="button">Створити</button></a>
                <a href="#editSkill"><button ng-click="setGlobalEditParams(getGlobalSkillId(), 'ALL_INDICATORS', 'ALL_GROUPS', 1)" class="btn btn-primary" type="button">Назад</button></a>
            </div>

        </div>

        <!-- Додання нової групи -->
        <div ng-if="getGlobalEditMode()==6">

            <h2>Створення нової групи:</h2>

            <div ng-init="getGroupTree()"></div>

            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Назва групи" ng-model="nameText">
            <input style="margin-bottom: 10px" type="text" class="form-control" placeholder="Опис" ng-model="descriptionText">
            <div class="input-group" style="margin-bottom: 10px">
                <input type="text" class="form-control" placeholder="Коренева група" ng-model="groupText">
                <div class="input-group-btn">
                    <button class="btn btn-primary" ng-click="show=!show">{{changeButtonTextSelectFromTree(show)}}</button>
                </div>
            </div>

            <div style="overflow-y: scroll; height: 200px" ng-show="show"><div id="tree"></div></div>

            <div style="margin-bottom: 20px"></div>

            <div style="margin-bottom: 20px" class="btn-group">
                <a href="#adminView"><button ng-click="saveGroup(nameText, currentGroup.right_key, currentGroup.node_level, descriptionText, -1);" class="btn btn-primary" type="button">Створити</button></a>
                <a href="#adminView"><button ng-click="" class="btn btn-primary" type="button">Назад</button></a>
            </div>

        </div>

    </div>

</body>
</html>
